name: Deploy Completo - Todos os Módulos

on:
  push:
    branches:
      - main # Dispara o deploy quando há push na branch principal

jobs:
  # Job de Deploy para o Módulo HOST
  deploy_host:
    runs-on: ubuntu-latest
    environment: production_host

    steps:
      - uses: actions/checkout@v4
      
      # [ADAPTAR] Etapas de Build e Deploy para o Módulo Host
      - name: Instalar e Build do Host App
        run: |
          cd apps/host
          npm install
          npm run build
        
      - name: Deploy do Host App (EXEMPLO AWS)
        run: echo "Fazendo deploy do Host App na AWS..."
        # ADICIONE A SUA ACTION DE DEPLOY AQUI!

  # Job de Deploy para o Módulo RESERVA
  deploy_reserva:
    runs-on: ubuntu-latest
    environment: production_reserva

    steps:
      - uses: actions/checkout@v4
      
      # [ADAPTAR] Etapas de Build e Deploy para o Módulo Reserva
      - name: Instalar e Build do Módulo Reserva
        run: |
          cd apps/reserva # Ajuste o caminho da sua pasta
          npm install
          npm run build
        
      - name: Deploy do Módulo Reserva (EXEMPLO GOOGLE CLOUD)
        run: echo "Fazendo deploy do Módulo Reserva no Google Cloud..."
        # ADICIONE A SUA ACTION DE DEPLOY AQUI!
